# Теория оптимизации  

## Пошаговый алгоритм оптимизации в рамках БД
1) определить этап, на котором возникла проблема  
2) выяснить причину снижения производительности  
3) подобрать метод оптимизации 

### Уровень SQL-запроса
Найти причину на уровне SQL можно проанализировав скорость выполнения запроса, например через модуль `pg_stat_statements`.  

Определив, что запрос является медленным можно сделать:  
1) **анализ структуры запроса** - возможно из-за неэффективности структуры его стоит перестроить  
2) **анализ самого запроса** - можно начасть с условий фильтрации и соединения  
3) **избавиться от лишних данных в запросе** - лишние данные = лишнее время выполнения запроса 

### Уровень структуры БД
Для выявления проблем в структуре БД можно:  
1) **Анализ структуры БД** - необходимо проанализировать структуру. Нет ли лишних данных, хорошо ли нормализована  
2) **Анализ типов данных** - размер таблицы может необоснованно расти из-за перегрузки таблиц некорректными типами данных
3) **Партицирование таблиц** - большие таблицы можно разбить на партиции по признаку, чтобы запрос сканировал не всю таблицу а лишь конкретную партицию  

