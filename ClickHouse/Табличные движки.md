# Табличные движки

`Движки` (англ. engines) — это типы таблиц, которые определяют, как и где хранятся данные в таблице, какие запросы поддерживает таблица и т. д.  
Ссылка на документацию по движкам: https://clickhouse.com/docs/ru/engines/table-engines  

## MergeTree  

`MergeTree` — это основной и наиболее мощный движок таблиц в системе ClickHouse, предназначенной для хранения и анализа больших объемов данных. Движок, который определяет, как данные хранятся и обрабатываются в ClickHouse. Основная идея этого движка — разделение данных на блоки (parts) , которые можно объединять (merge) по мере их накопления.  
Данные в MergeTree хранятся в виде файлов , каждый из которых представляет собой отдельный блок (part) . Каждый блок содержит:  
* Данные в формате Columnar Storage (столбцы хранятся отдельно).  
* Индексы для ускорения поиска.  
* Метаданные о блоке.  
* Когда данные вставляются, они сохраняются в отдельные блоки. Периодически система запускает процесс Merging , который объединяет блоки в более крупные, упорядоченные по ключу сортировки.  

Таблица на движке MergeTree хранит данные, отсортированные по первичному ключу. Также можно указать поле для партиционирования.  
Для примера возьмём таблицу с клиентами банка:   
```SQL
CREATE TABLE clients 
   (registration_date Date,
    client_id Int32
) ENGINE = MergeTree()
ORDER BY client_id;
```  

Мы указали, что первичным ключом, или ключом сортировки, будет поле client_id. Движок, как и первичный ключ, нужно указывать вместе с оператором ORDER BY. Создать таблицу без движка не получится — он нужен обязательно.   

