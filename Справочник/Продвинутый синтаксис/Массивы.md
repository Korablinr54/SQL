# Массивы
## Определение
**Массив** — это упорядоченная коллекция элементов одного типа данных.  

Ключевые особенности массивов в PostgreSQL:  
* **Однотипность элементов** Все элементы массива должны быть одного типа (например, только числа, только строки и т. д.).  
* **Индексируемость** Каждый элемент имеет свой индекс (порядковый номер), начиная с 1 (или с 0, если используется специальная настройка). Доступ к элементам осуществляется по индексу: имя_массива[индекс].  
* **Гибкость хранения данных** Массивы полезны, когда нужно хранить список значений в одной ячейке таблицы.  

Например, в базе данных сервиса такси можно хранить дополнительные номера телефонов клиента в виде массива, в то время как основной номер хранится отдельно.  

| Критерий               | Массив в одной колонке (`add_phones`) | Отдельная таблица (`client_phones`) |
|------------------------|---------------------------------------|-------------------------------------|
| **Дублирование данных** | Нет дублирования данных клиента       | Требует хранения `client_id` для каждой записи |
| **Сложность запросов**  | Простые выборки                      | Требует JOIN для объединения данных |
| **Гибкость**           | Только хранение номеров              | Можно добавить атрибуты (тип, дата и т.д.) |
| **Производительность** | Лучше для небольших наборов данных   | Лучше для больших наборов данных и сложных запросов |
| **Масштабируемость**   | Плохо для >15 элементов              | Хорошо для любого количества записей |
| **Использование**       | Простые случаи (доп. номера без метаданных) | Сложные случаи (нужна доп. информация о номерах) |
| **Пример SQL**         | `SELECT * FROM clients WHERE id = 1` | `SELECT * FROM client_phones WHERE client_id = 1` |

| id | client_name          | phone      | add_phones                     |
|----|----------------------|------------|--------------------------------|
| 1  | Иванов Петр Сергеевич | 79991234567 | {79167654321, 79035671234}     |
| 2  | Смирнова Анна Дмитриевна | 79876543210 | {79991112233, 79213457689}     |
| 3  | Козлов Денис Викторович | 79780001122 | {79152223344}                 |  

Без массива пришлось бы создавать отдельную таблицу для номеров, например:  
| client_id | phone_type | phone      |
|-----------|------------|------------|
| 1         | main       | 79991234567|
| 1         | additional | 79167654321|
| 1         | additional | 79035671234|  

